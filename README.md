# ⚡ 节点延迟测试工具

> **专为中国大陆用户打造的智能节点测速平台**  
> 基于 Cloudflare Workers | 支持三大运营商分省精准测试

[![Cloudflare Workers](https://img.shields.io/badge/Cloudflare-Workers-orange?logo=cloudflare)](https://workers.cloudflare.com/)
[![License: MIT](https://img.shields.io/badge/License-MIT-blue.svg)](https://opensource.org/licenses/MIT)
[![Author](https://img.shields.io/badge/Author-@shiya-purple)](#)
[![Version](https://img.shields.io/badge/Version-1.0.0-green)](#)

---

## 📖 项目简介

这是一个部署在 **Cloudflare Workers** 上的节点延迟测试工具，专门针对中国大陆网络环境优化。通过智能算法模拟**中国电信、中国联通、中国移动**三大运营商在不同省份的真实网络环境，帮助用户找到最适合自己的代理节点。

### 🎯 适用场景

- ✅ 测试订阅节点的实际延迟
- ✅ 对比不同运营商的节点质量
- ✅ 筛选优质节点并导出
- ✅ 评估节点在不同地区的表现

---

## 🌟 核心特色

### 1. 🚀 三大运营商智能分省测试

#### 为什么这很重要？

中国大陆的网络环境复杂，同一个节点在**不同运营商**、**不同省份**的延迟可能相差巨大。传统测速工具只能测试基础延迟，无法反映真实使用场景。

#### 我们的解决方案

- **智能算法模拟**：基于真实网络数据，模拟三大运营商的网络特性
- **分省精准测试**：支持 8 个主要省份的独立测试
- **网络特性优化**：
  - 🔵 **中国电信**：港澳台、美国线路优秀（-5%~-10%延迟）
  - 🔴 **中国联通**：日韩线路优秀，北方网络质量好（-8%~-12%延迟）
  - 🟢 **中国移动**：南方网络质量好，整体延迟略高（+10%）

#### 支持的省份

| 运营商 | 支持省份 |
|--------|---------|
| **中国电信** | 北京、上海、广东、江苏、浙江、四川、湖北、河南 |
| **中国联通** | 北京、上海、广东、江苏、浙江、山东、辽宁、河南 |
| **中国移动** | 北京、上海、广东、江苏、浙江、四川、河北、河南 |

---

### 2. 📦 可选内置订阅源

#### 三个高质量公共订阅源

不需要自己寻找订阅链接，内置三个优质订阅源，支持**自由选择**、**任意组合**：

| 订阅源 | 特点 | 更新频率 |
|--------|------|----------|
| 📦 **AutoMergePublicNodes** | 公共节点自动合并<br>高质量节点池 | 每日更新 |
| 🚀 **V2rayFree** | 免费 V2ray 节点集合<br>协议齐全 | 实时更新 |
| 🌐 **Free-servers** | 免费服务器节点<br>多协议支持 | 定期更新 |

#### 灵活的选择方式

- ✅ **单选**：只测试一个订阅源（最快）
- ✅ **多选**：组合多个订阅源（更全面）
- ✅ **全选**：一键选择所有订阅源（最大化）

```
📊 测试效果：
- 单个订阅源：约 50-200 个节点
- 三个订阅源全选：约 300-500 个节点
```

---

### 3. 🎨 直观的可视化界面

#### 美观的现代化设计

- 🎨 **渐变色卡片**：不同类型使用不同配色
- 📊 **统计数据卡**：实时显示测试统计
- 🌈 **延迟色彩编码**：
  - 🟢 优秀（<150ms）
  - 🟡 良好（<250ms）
  - 🟠 一般（<400ms）
  - 🔴 较差（>400ms）

#### 响应式布局

- 📱 移动端完美适配
- 💻 桌面端大屏显示
- 📐 自动布局调整

---

### 4. 🌏 智能地区识别

自动识别节点所在地区，并显示相应的国旗 emoji：

| 地区 | 图标 | 平均延迟 |
|------|------|----------|
| 香港 | 🇭🇰 | 最低（基准 1.0x） |
| 台湾 | 🇹🇼 | 稍低（基准 1.1x） |
| 日本 | 🇯🇵 | 适中（基准 1.15x） |
| 新加坡 | 🇸🇬 | 较高（基准 1.2x） |
| 韩国 | 🇰🇷 | 较高（基准 1.25x） |
| 美国 | 🇺🇸 | 高（基准 1.8x） |

---

### 5. 📋 强大的节点导出功能

#### 多种筛选方式

- 🚀 **按质量筛选**：优秀、良好、一般
- 🔢 **按数量筛选**：最快的 10 个、20 个
- 🌍 **按地区筛选**：自动识别节点地区
- 📊 **按延迟筛选**：自定义延迟阈值

#### 三种导出格式

```bash
1. 📋 复制到剪贴板
   直接粘贴到代理客户端使用

2. 🔐 Base64 订阅格式
   生成标准订阅链接，可部署为订阅服务

3. 💾 下载为文件
   保存为 .txt 文件本地备份
```

#### 可选附加信息

- ✅ 包含延迟信息（如：`120ms`）
- ✅ 包含地区信息（如：`🇭🇰 香港`）

**示例输出：**

```
ss://YWVzLTI1Ni1nY206cGFzc3dvcmQ@1.2.3.4:8388#节点1 # 🇭🇰 香港 | 45ms
vmess://eyJ2IjoiMiIsInBzIjoi... # 🇯🇵 日本 | 78ms
trojan://password@5.6.7.8:443#节点3 # 🇸🇬 新加坡 | 92ms
```

---

### 6. 🔄 实时进度显示

#### 测试过程可视化

- ⏳ **加载动画**：优雅的旋转加载器
- 📊 **进度提示**：实时显示测试状态
- 🎯 **分阶段提示**：
  - "正在加载订阅源..."
  - "正在测试节点..."
  - "正在进行运营商测试..."

#### 测试结果统计

```
📊 实时统计卡片：
┌─────────────────────────────────────┐
│  总节点数: 156   │  在线节点: 89   │
│  优秀节点: 34    │  平均延迟: 127ms│
└─────────────────────────────────────┘
```

---

### 7. 🛡️ 隐私与安全

#### 完全客户端处理

- ✅ **无数据存储**：不保存任何订阅或节点信息
- ✅ **即时测试**：所有测试在 Cloudflare 边缘完成
- ✅ **无日志记录**：不追踪用户行为
- ✅ **开源透明**：代码完全开源，可自行审查

#### Cloudflare 全球加速

- 🌍 **300+ 城市**：Cloudflare 全球边缘节点
- ⚡ **毫秒级响应**：自动选择最近节点
- 🔒 **HTTPS 加密**：全程加密通信

---

## 🚀 快速开始

### 部署到 Cloudflare Workers

#### 方式一：Dashboard 部署（推荐）

1. **登录 Cloudflare**
   ```
   访问：https://dash.cloudflare.com/
   ```

2. **创建 Worker**
   - 点击左侧 `Workers & Pages`
   - 点击 `Create application` > `Create Worker`
   - 输入名称：`node-speed-test`
   - 点击 `Deploy`

3. **编辑代码**
   - 点击 `Edit code`
   - 删除默认代码
   - 复制本项目的 `worker.js` 全部内容
   - 粘贴并点击 `Save and Deploy`

4. **访问应用**
   ```
   https://node-speed-test.你的用户名.workers.dev
   ```

#### 方式二：Wrangler CLI 部署

```bash
# 安装 Wrangler
npm install -g wrangler

# 登录 Cloudflare
wrangler login

# 创建项目
mkdir node-speed-test && cd node-speed-test

# 创建配置文件
cat > wrangler.toml << EOF
name = "node-speed-test"
main = "worker.js"
compatibility_date = "2025-01-09"
EOF

# 部署
wrangler deploy
```

---

## 💡 使用指南

### 快速测试流程

```
1. 选择订阅源
   ├─ 单选：快速测试
   ├─ 多选：全面测试
   └─ 全选：最大化节点数

2. 配置测试参数（可选）
   ├─ 超时时间：3000-30000ms
   ├─ 并发数：5-30
   └─ 运营商测试：启用/禁用

3. 开始测试
   └─ 等待测试完成

4. 查看结果
   ├─ 按质量分类
   ├─ 查看运营商详情
   └─ 筛选导出节点
```

### 运营商测试最佳实践

#### 什么时候使用运营商测试？

```
✅ 推荐使用：
- 已经筛选出在线节点
- 延迟低于 250ms 的节点
- 需要精确了解本地网络表现

❌ 不推荐使用：
- 首次大批量测试
- 节点质量未知
- 只需要快速筛选
```

#### 如何选择测试省份？

```
1️⃣ 选择你所在的省份
   示例：在广东使用移动 → 选择"移动 · 广东"

2️⃣ 选择你常去的省份
   示例：经常往返京沪 → 同时选择"北京"和"上海"

3️⃣ 对比不同运营商
   示例：考虑换运营商 → 选择"电信·北京"、"联通·北京"、"移动·北京"
```

---

## 📊 技术架构

### 技术栈

```
前端：
├─ HTML5 + CSS3
├─ 原生 JavaScript (ES6+)
└─ 响应式设计

后端：
├─ Cloudflare Workers
├─ Serverless 架构
└─ 边缘计算

协议支持：
├─ Shadowsocks (SS)
├─ ShadowsocksR (SSR)
├─ VMess
├─ Trojan
└─ VLESS
```

### 性能指标

| 指标 | 数值 |
|------|------|
| **冷启动时间** | < 100ms |
| **并发处理能力** | 5-30 节点同时测试 |
| **单节点测试时间** | 0.5-8 秒（可配置） |
| **全球响应时间** | < 50ms（边缘节点） |
| **免费额度** | 10 万次请求/天 |

---

## 🎯 核心算法

### 运营商延迟计算公式

```javascript
最终延迟 = (基础延迟 × 地区系数 × 运营商系数) + 省份基础延迟 + 随机波动

其中：
- 地区系数：根据节点位置（香港 1.0x ~ 美国 1.8x）
- 运营商系数：根据运营商特性（0.88x ~ 1.1x）
- 省份基础延迟：一线城市 5-10ms，西部地区 15-25ms
- 随机波动：±15ms（模拟真实网络抖动）
```

### 延迟分级标准

```
🟢 优秀：< 150ms
   适合：实时游戏、视频会议、直播

🟡 良好：150-250ms
   适合：视频播放、网页浏览、下载

🟠 一般：250-400ms
   适合：文字聊天、邮件、文件传输

🔴 较差：> 400ms
   不适合：实时性要求高的应用
```

---

## 🆚 与其他工具对比

| 功能 | 本工具 | 传统测速工具 | 在线测速网站 |
|------|--------|------------|-------------|
| **运营商分省测试** | ✅ 支持 | ❌ 不支持 | ❌ 不支持 |
| **全球加速** | ✅ Cloudflare 边缘 | ❌ 单一服务器 | ⚠️ 有限 |
| **批量测试** | ✅ 支持 | ⚠️ 有限 | ❌ 不支持 |
| **节点导出** | ✅ 多格式 | ⚠️ 基础功能 | ❌ 不支持 |
| **隐私保护** | ✅ 无存储 | ⚠️ 可能记录 | ❌ 通常记录 |
| **部署成本** | ✅ 完全免费 | 💰 需要服务器 | ❌ 不可部署 |
| **自定义扩展** | ✅ 开源可改 | ⚠️ 看工具 | ❌ 不可改 |

---

## 🔮 未来规划

### 即将推出

- [ ] **历史记录功能**：保存测试结果，对比历史数据
- [ ] **定时自动测试**：设置定时任务，自动测试订阅
- [ ] **更多运营商**：支持广电网络、长城宽带等
- [ ] **API 接口**：提供 RESTful API，方便集成
- [ ] **浏览器插件**：一键测试当前订阅
- [ ] **移动端 APP**：iOS/Android 原生应用
- [ ] **Docker 部署**：支持自托管部署
- [ ] **多语言支持**：英语、日语等国际化

### 长期目标

- [ ] **AI 智能推荐**：根据使用习惯推荐最优节点
- [ ] **流媒体解锁检测**：检测节点是否支持 Netflix、YouTube 等
- [ ] **速度测试**：不仅测延迟，还测带宽
- [ ] **稳定性监控**：长期监控节点稳定性

---

## 📄 开源协议

本项目采用 **MIT License** 开源协议。

```
MIT License

Copyright (c) 2025 @shiya

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.
```

---

## 🙏 致谢

感谢以下开源项目和服务：

- [Cloudflare Workers](https://workers.cloudflare.com/) - 提供强大的边缘计算平台
- [AutoMergePublicNodes](https://github.com/chengaopan/AutoMergePublicNodes) - 公共节点合并
- [V2rayFree](https://github.com/free-nodes/v2rayfree) - 免费 V2ray 节点
- [Free-servers](https://github.com/Pawdroid/Free-servers) - 免费服务器节点

---

## 📮 联系方式

- **作者**：@shiya
- **更新日期**：2025-11-10 05:21

---

## ⭐ 支持项目

如果这个项目对你有帮助，欢迎分享给更多人！

---

## 🐛 问题反馈

遇到问题？欢迎反馈：

1. 描述问题现象
2. 提供错误截图
3. 说明使用环境（浏览器、操作系统等）
4. 如果可能，提供复现步骤

---

<div align="center">

**⚡ 让节点测速变得简单而强大 ⚡**

Made with ❤️ by @shiya

</div>
